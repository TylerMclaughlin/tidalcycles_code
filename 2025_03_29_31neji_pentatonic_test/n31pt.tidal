:script "~/Music/ableton_songs/toolz.tidal"

setbpm (135/24*16)

-- old setbpm 96

getbpm

------------------------ C D  E  F  G  A  B
let e31    = tScale' 31 "0 5 10 13 18 23 28"
    e31mpA = tScale' 31 "0 5 10    18 23"
    e31mpD = tScale' 31 "0   10 13 18 23"
    e31mpE = tScale' 31 "  5 10    18 23 28"

d1 $ (|- n "<0 10>/8") $ fastsoft' 0.7 "<1 <1.5 2>> 1 1 <1.5 1>" $ ncat [ (2, n (e31mpA ("0..23" |- "0 3 6 9"))),
                  (2, n (e31mpE ("0..23" |- "0 2 [4 3] 6 8 8")))] # m 1 

-- chord stabzz
d2 $ (|- n "<0 10>/8") $ rizz 12 "0 0.01" $ mask "f t!23" $ struct "t(<13 15 17 19 21 23>*4,24)" $
     ncat [
     (2, n (e31 ("[0,4,[10@15 9@9]/2]"))),
     (2, n (e31mpE ("[0,4,<9 8>]" |- 2) )),
     (2, n (e31mpA ("[0,4,[10@13 11@11]/2]"))),
     (2, n (e31mpE ("[2,4,<9 8>]" |- 1) ))
     ] # m 2 

-- choredom ehhh
d3 $ (|- n "<0 10>/8") $ rizz 12 "0 0.01" $ mask "t t!23" $ 
     ncat [
     (2, n (e31 ("[2,[10@15 9@9]/2]" |+ 0))),
     (2, n (e31mpE ("[1,<9 ~> ]" |- 1 |+ 1) )),
     (2, n (e31mpA ("[1,[10@13 11@11]/2]" |+ 1))),
     (2, n (e31mpE ("[5,<9 8>]" |- 1 |+ 1) ))
     ] # m 3 

-- nice arp
d3 $ (|+ n 31) $ (|- n "<0 10>/8") $
          fastsoft' 0.7 "<1 <1.5 2>> 1 1 <1.5 1>" $ ncat [
                  (2, n (e31mpA ("[0 1 2 3 4 5]*4" |- "0 3 6 9"))),
                  (2, n (e31mpE ("[0 1 2 3 4 5]*4" |- "0 2 [4 3] 6 8 8")))] # m 3 


d3 silence

-- bass
d4 $ (|- n 31) $ (|- n "<0 10>/8") $ rizz 12 "0 0.01" $
    mask "[t t!3]*6" $ struct "t(24,24)" $ -- struct "t(<15 19 17 21 19 23>*4,24)" $
     ncat [
     (2, n (e31 ( "[5..0]*4"))),
     (2, n (e31mpE ( "[5..0]*6" |- 2) )),
     (2, n (e31mpA ( "[5..0]*4"))),
     (2, n (e31mpE ( "[5..0]*6" |- 1) ))
     ] # m 4 

-- roller
d5 $ rizz 12 "0 0.01" $ (|+ n 2) $ drumz $ slow 8 $ (# amp "0.2 0.32 0.3 0.25 0.72 0.72 0.7 0.67 0.3 0.32 0.18 0.18 0.32 0.32 0.32 0.2 0.3 0.3 0.32 0.38 0.18 0.25 0.67 0.3 0.18 0.65 0.32 0.3 0.3 0.18 0.18 0.2 0.38 0.38 0.18 0.25 0.18 0.38 0.2 0.7 0.67 0.18 0.3 0.67 0.2 0.18 0.18 0.2 0.32 0.38 0.65 0.2 0.32 0.38 0.25 0.32 0.32 0.2 0.2 0.25 0.32 0.65 0.18 0.32 0.18 0.18 0.3 0.38 0.18 0.3 0.3 0.662 0.25 0.38 0.38 0.25 0.32 0.18 0.2 0.2 0.3 0.2 0.2 0.32 0.25 0.67 0.67 0.2 0.25 0.662 0.3 0.18 0.2 0.3 0.25 0.32") $ n "4 3 0 0 4 4 2 2 2 3 1 4 2 0 0 4 1 0 0 3 2 1 2 2 3 1 3 3 2 4 3 2 3 4 4 3 3 1 3 3 2 0 0 4 3 1 1 3 0 0 2 1 1 1 2 0 0 2 2 4 4 3 1 1 1 2 3 3 4 0 0 4 2 3 4 2 0 3 1 0 0 2 2 0 0 2 4 0 0 1 3 3 3 3 0 0" # m 5
-- rlkkRLRLrllrlkkrlkkrllRllRllrlrlrllrlrlRLkkRllrlkkRllrlkkrlrlRllrllrlkkRllrlkrlkkrlkkRLkkRllrlkk

-- infrasonic sidechain?? doesn't work yet.
d11 $ n ( "-24") # m 11

d11 silence

d6 $ (# amp 1) $ drumz $ fast 6 $ n "[0 <4 [4 4]>]" # m 5

d6 $ (# amp 1) $ drumz $ fast 6 $ n "[0 ]" # m 5

-- snare
d8 $ (# amp 0.7) $ r 0.001 $ drumz $ fast 3 $ n "[~ 2 ]" # m 5

-- hats
d7 $  rizz 12 "-0.001 0.01" $ degradeBy 0.4 $ (|* amp (fast 6 $ "<0.5 0.4 0.6 0.45> <0.7 0.8> <1.0 0.95 0.97 0.95 0.94> <0.9 0.8 0.85>")) $
    (# amp 0.8) $ drumz $ mask "f t!23" $
    struct "t(<17 15 19 19 23 21>*4,24)" $
    n "<4 5 6 5>/4"  # m 6
