:script "/Users/r_tyler/Music/ableton_songs/toolz.tidal"

let piano1 = slow (256.0/4) $ stack [
     n "~!2 c4 ~!20 d5 e5 ~!7 f4 ~!2 g3 ~!4 g5 e5 d5 b4 ~ d5 ~!20 e4 ~!4 f4 ~!18 f4 ~!11 g5 ~!9 d4 ~!2 b5 ~!2 d6 ~!2 e6 ~!2 a5 ~!18 g4 ~!2 a5 ~!2 e4 ~!3 g5 c6 ~ g5 ~!6 c5 ~!8 b5 ~!6 c5 ~!2 a5 ~ e5 ~ d5 ~!3 f5 ~!2 d5 f4 ~!3 a4 ~!11 d5 ~!10 a4 ~ d4 ~ a4 ~ d5 ~ a4 ~!27 e4 ~!4 d4 d5 ~!27 c5 ~!2 c5 d5 ~!6 c5 ~!17 e5 ~!4 c5 d5 ~!20 e4 ~!5 a5 ~!2 c6 d6 ~!2 a5 ~ d6 ~!25 f6 ~ a5 ~!2 d6 ~ g4 ~!21 e6 d6 c6 d6 ~!2 a4 d6 ~!22 a5 ~!4 d6 ~!3 g4 ~!3 b5 ~!18 e4 ~ b5 ~!3 a5 ~!19 c6 ~!3 d6 ~!3 e6 ~!2 b5 c6 ~!2 b5 ~!22 c6 ~!2 b5 ~!2 a5 ~!2 a5 ~!28 g6 ~!6 e4 ~!28 d5 ~ g6 ~!5 g6 ~!18 e6 ~ d6 c6 ~!11 a5 b5 d6 ~ e6 d5 ~!15 c6 b5 a5 ~!19 f4 ~!33 g4 ~!14 e5 ~!9 d5 ~ e5 ~!3 e5 ~!25 e5 ~!4 b4 ~!7 b5 ~!15 e5 ~!5 a5 ~!2 a4 ~!11 d5 ~!5 b5 ~!10 c6 ~ b5 e4 ~!6 e5 ~!3 d5 ~!14 d6 ~!2 e6 ~!2 e5 ~!5 a5 ~!4 f5 ~!16 a5 ~ b5 b4 ~!15 c6 b5 ~!2 b5 ~!8 a5 g5 ~ f4 ~!27 g5 ~ e5 ~!2 e4 ~!32"
     # amp "0!2 0.28 0!20 0.39 0.67 0!7 0.51 0!2 0.45 0!4 0.56 0.4 0.27 0.29 0.0 0.31 0!20 0.07 0!4 0.4 0!18 0.23 0!11 0.52 0!9 0.11 0!2 0.35 0!2 0.29 0!2 0.44 0!2 0.2 0!18 0.23 0!2 0.39 0!2 0.21 0!3 0.32 0.43 0.0 0.27 0!6 0.22 0!8 0.49 0!6 0.24 0!2 0.71 0.0 0.33 0.0 0.53 0!3 0.51 0!2 0.47 0.17 0!3 0.17 0!11 0.26 0!10 0.5 0.0 0.32 0.0 0.58 0.0 0.59 0.0 0.21 0!27 0.28 0!4 0.24 0.29 0!27 0.56 0!2 0.4 0.42 0!6 0.46 0!17 0.62 0!4 0.38 0.32 0!20 0.28 0!5 0.47 0!2 0.51 0.45 0!2 0.44 0.0 0.47 0!25 0.69 0.0 0.45 0!2 0.61 0.0 0.24 0!21 0.57 0.5 0.37 0.45 0!2 0.19 0.36 0!22 0.46 0!4 0.61 0!3 0.21 0!3 0.24 0!18 0.27 0.0 0.69 0!3 0.39 0!19 0.6 0!3 0.7 0!3 0.61 0!2 0.5 0.25 0!2 0.28 0!22 0.53 0!2 0.53 0!2 0.33 0!2 0.42 0!28 0.57 0!6 0.27 0!28 0.39 0.0 0.58 0!5 0.31 0!18 0.45 0.0 0.53 0.62 0!11 0.52 0.59 0.63 0.0 0.46 0.26 0!15 0.54 0.4 0.28 0!19 0.13 0!33 0.18 0!14 0.37 0!9 0.27 0.0 0.39 0!3 0.43 0!25 0.32 0!4 0.19 0!7 0.36 0!15 0.3 0!5 0.63 0!2 0.25 0!11 0.28 0!5 0.35 0!10 0.35 0.0 0.57 0.24 0!6 0.21 0!3 0.19 0!14 0.61 0!2 0.75 0!2 0.35 0!5 0.23 0!4 0.25 0!16 0.49 0.0 0.41 0.23 0!15 0.53 0.35 0!2 0.41 0!8 0.43 0.35 0.0 0.23 0!27 0.39 0.0 0.35 0!2 0.23 0!32"
     # legato "0!2 28.0 0!20 1.0 15.0 0!10 24.0 0!4 1.0!4 0.0 26.0 0!20 36.0 0!4 15.0 0!18 14.0 0!11 13.0 0!9 30.0 0!2 3.0 0!2 4.0 0!2 5.0 0!2 20.0 0!18 3.0 0!2 3.0 0!2 41.0 0!3 1.0 2.0 0.0 15.0 0!6 14.0 0!8 2.0 0!6 5.0 0!2 2.0 0.0 2.0 0.0 2.0 0!3 3.0 0!2 2.0 28.0 0!3 22.0 0!11 13.0 0!10 3.0 0.0 3.0 0.0 2.0 0.0 2.0 0.0 26.0 0!27 3.0 0!4 30.0 27.0 0!27 2.0 0!2 1.0 8.0 0!6 19.0 0!17 5.0 0!4 1.0 21.0 0!20 8.0 0!5 3.0 0!2 1.0 3.0 0!2 1.0 0.0 23.0 0!25 5.0 0.0 2.0 0!2 1.0 0.0 22.0 0!21 1.0!3 4.0 0!2 28.0 5.0 0!22 3.0 0!4 3.0 0!3 20.0 0!3 19.0 0!18 1.0 0.0 3.0 0!3 1.0 0!19 4.0 0!3 4.0 0!3 3.0 0!2 1.0 3.0 0!2 21.0 0!22 3.0 0!2 4.0 0!2 2.0 0!2 36.0 0!28 7.0 0!6 31.0 0!28 4.0 0.0 5.0 0!5 16.0 0!18 2.0 0.0 1.0 11.0 0!11 1.0!2 2.0 0.0 12.0 34.0 0!15 1.0!2 19.0 0!19 27.0 0!33 26.0 0!14 11.0 0!9 3.0 0.0 3.0 0!3 25.0 0!30 30.0 0!7 22.0 0!15 6.0 0!5 4.0 0!2 29.0 0!11 18.0 0!5 11.0 0!10 3.0 0.0 10.0 24.0 0!6 19.0 0!3 17.0 0!14 3.0 0!2 3.0 0!2 26.0 0!5 20.0 0!4 17.0 0!16 2.0 0.0 1.0 28.0 0!15 1.0!2 0!2 9.0 0!8 1.0!2 0.0 27.0 0!27 2.0 0.0 2.0 0!2 33.0 0!32",
     n "~!2 e4 ~!29 a3 ~!2 b3 ~!31 f4 ~!7 d5 ~!36 e4 ~!30 e4 ~!5 c5 ~!20 f5 ~!3 f5 ~!4 e5 ~!6 c5 ~!7 g4 ~!12 f5 ~!21 e4 ~!27 d5 ~!4 c5 ~!32 e4 ~!6 f4 ~!23 g3 ~!33 f5 ~!23 e6 ~!7 c6 ~!2 d5 ~!27 c5 ~!4 e6 ~!21 c6 ~!5 e4 ~!22 b4 ~!6 f5 ~!29 g4 ~!24 d6 ~!10 d5 ~!36 g4 ~!35 c5 ~!31 b5 ~!2 c6 ~!3 b4 ~!37 g5 ~!33 d5 ~!30 c5 ~!25 f5 ~!4 g4 ~!25 f5 ~!6 d5 ~!15 f5 ~ g5 ~!13 g4 ~!3 g5 ~!10 e6 ~!16 d6 ~ e6 ~!22 g5 ~!5 e5 ~!17 a5 ~!13 a4 ~!32 g4 ~!32"
     # amp "0!2 0.35 0!29 0.35 0!2 0.33 0!31 0.35 0!7 0.35 0!36 0.37 0!30 0.37 0!5 0.31 0!20 0.31 0!3 0.42 0!4 0.24 0!6 0.3 0!7 0.22 0!12 0.24 0!21 0.24 0!27 0.43 0!4 0.39 0!32 0.17 0!6 0.46 0!23 0.28 0!33 0.38 0!23 0.63 0!7 0.48 0!2 0.19 0!27 0.25 0!4 0.32 0!21 0.62 0!5 0.16 0!22 0.3 0!6 0.2 0!29 0.28 0!24 0.65 0!10 0.28 0!36 0.23 0!35 0.27 0!31 0.56 0!2 0.63 0!3 0.24 0!37 0.35 0!33 0.23 0!30 0.35 0!25 0.52 0!4 0.25 0!25 0.47 0!6 0.16 0!15 0.39 0.0 0.34 0!13 0.25 0!3 0.36 0!10 0.54 0!16 0.5 0.0 0.46 0!22 0.61 0!5 0.24 0!17 0.35 0!13 0.2 0!32 0.22 0!32"
     # legato "0!2 28.0 0!32 25.0 0!31 2.0 0!7 31.0 0!36 30.0 0!30 3.0 0!5 12.0 0!20 1.0 0!3 7.0 0!4 3.0 0!6 2.0 0!7 28.0 0!12 3.0 0!21 27.0 0!27 4.0 0!4 1.0 0!32 26.0 0!6 19.0 0!23 28.0 0!33 26.0 0!23 4.0 0!7 1.0 0!2 21.0 0!27 28.0 0!4 23.0 0!21 3.0 0!5 20.0 0!22 1.0 0!6 26.0 0!29 32.0 0!24 3.0 0!10 34.0 0!36 30.0 0!35 36.0 0!31 2.0 0!2 2.0 0!3 34.0 0!37 1.0 0!33 23.0 0!30 27.0 0!25 10.0 0!4 31.0 0!25 2.0 0!6 9.0 0!15 3.0 0.0 11.0 0!13 25.0 0!3 18.0 0!10 12.0 0!16 2.0 0.0 27.0 0!22 4.0 0!5 28.0 0!17 2.0 0!13 27.0 0!32 31.0 0!32",
     n "~!2 a3 ~!29 e4 ~!2 d4 ~!31 c4 ~!9 e5 ~!35 g4 ~!29 d4 ~!6 a4 ~!37 e5 ~!5 b4 ~!34 c4 ~!27 f4 ~!5 e4 ~!31 g4 ~!30 b3 ~!34 c5 ~!33 c6 ~!27 f4 ~!32 c6 ~!22 d5 ~!6 c5 ~!29 b4 ~!35 a4 ~!36 b4 ~!35 f5 ~!38 e5 ~!37 a4 ~!33 b5 ~!30 a4 ~!30 d5 ~!27 g5 ~!4 f5 ~!15 a5 ~!15 b4 ~!31 a4 ~!30 g4 ~!31 c5 ~!32 b4 ~!32"
     # amp "0!2 0.41 0!29 0.43 0!2 0.35 0!31 0.26 0!9 0.45 0!35 0.27 0!29 0.28 0!6 0.14 0!37 0.7 0!5 0.24 0!34 0.22 0!27 0.31 0!5 0.32 0!31 0.3 0!30 0.26 0!34 0.35 0!33 0.34 0!27 0.2 0!32 0.43 0!22 0.28 0!6 0.25 0!29 0.28 0!35 0.24 0!36 0.28 0!35 0.32 0!38 0.17 0!37 0.11 0!33 0.32 0!30 0.3 0!30 0.24 0!27 0.69 0!4 0.27 0!15 0.31 0!15 0.19 0!31 0.24 0!30 0.26 0!31 0.17 0!32 0.3 0!32"
     # legato "0!2 28.0 0!32 25.0 0!31 35.0 0!9 10.0 0!35 29.0 0!29 3.0 0!6 40.0 0!37 3.0 0!5 1.0 0!34 27.0 0!27 3.0 0!5 29.0 0!31 5.0 0!30 28.0 0!34 26.0 0!33 1.0 0!27 28.0 0!32 1.0 0!22 2.0 0!6 27.0 0!29 32.0 0!35 33.0 0!36 30.0 0!35 36.0 0!38 33.0 0!37 28.0 0!33 27.0 0!30 27.0 0!30 30.0 0!27 3.0 0!4 1.0 0!15 3.0 0!15 25.0 0!31 26.0 0!30 29.0 0!31 27.0 0!32 30.0 0!32",
     n "~!2 f4 ~!29 c4 ~!2 e4 ~!31 a3 ~!12 a5 ~!32 b4 ~!29 b4 ~!6 a5 ~!43 d4 ~!35 f4 ~!26 c4 ~!5 g4 ~!31 d4 ~!30 d4 ~!34 e5 ~!33 b4 ~!27 e5 ~!32 d5 ~!29 e5 ~!29 e5 ~!35 c5 ~!37 d5 ~!34 e5 ~!38 g4 ~!37 c5 ~!33 e4 ~!36 g5 ~!28 e5 ~!28 c5 ~!63 c5 ~!45 d6 ~!16 d5 ~!33 e5 ~!31"
     # amp "0!2 0.31 0!29 0.35 0!2 0.39 0!31 0.28 0!12 0.34 0!32 0.32 0!29 0.33 0!6 0.36 0!43 0.24 0!35 0.26 0!26 0.29 0!5 0.33 0!31 0.32 0!30 0.24 0!34 0.26 0!33 0.2 0!27 0.26 0!32 0.22 0!29 0.28 0!29 0.19 0!35 0.22 0!37 0.31 0!34 0.2 0!38 0.11 0!37 0.22 0!33 0.24 0!36 0.55 0!28 0.29 0!28 0.25 0!63 0.27 0!45 0.46 0!16 0.22 0!33 0.23 0!31"
     # legato "0!2 28.0 0!32 26.0 0!31 35.0 0!12 23.0 0!32 28.0 0!29 4.0 0!6 3.0 0!43 28.0 0!35 26.0 0!26 2.0 0!5 29.0 0!31 26.0 0!30 29.0 0!34 25.0 0!33 21.0 0!27 27.0 0!32 20.0 0!29 26.0 0!29 32.0 0!35 33.0 0!37 25.0 0!34 36.0 0!38 34.0 0!37 27.0 0!33 26.0 0!36 21.0 0!28 17.0 0!28 29.0 0!63 27.0 0!45 1.0 0!16 28.0 0!33 29.0 0!31",
     n "~!21 b4 ~!92 d5 ~!80 e5 ~!34 c5 ~!26 a4 ~!5 b4 ~!31 b3 ~!30 e4 ~!34 a4 ~!33 e5 ~!60 b4 ~!29 a4 ~!29 d5 ~!35 f4 ~!37 a5 ~!34 a4 ~!49 d6 ~!26 d5 ~!33 b4 ~!94 f4 ~!126 g5 ~!33 d5 ~!31"
     # amp "0!21 0.33 0!92 0.33 0!80 0.46 0!34 0.33 0!26 0.39 0!5 0.28 0!31 0.31 0!30 0.32 0!34 0.28 0!33 0.3 0!60 0.21 0!29 0.27 0!29 0.22 0!35 0.22 0!37 0.28 0!34 0.31 0!49 0.67 0!26 0.24 0!33 0.24 0!94 0.23 0!126 0.29 0!33 0.24 0!31"
     # legato "0!21 2.0 0!92 4.0 0!80 13.0 0!34 1.0 0!26 3.0 0!5 29.0 0!31 27.0 0!30 19.0 0!34 24.0 0!33 21.0 0!60 20.0 0!29 27.0 0!29 32.0 0!35 33.0 0!37 34.0 0!34 36.0 0!49 5.0 0!26 28.0 0!33 26.0 0!94 29.0 0!126 2.0 0!33 29.0 0!31",
     n "~!230 d5 ~!130 c6 ~!34 d6 ~!60 d6 ~!28 b5 ~!70 c6 ~!33 g6 ~!49 f6 ~!61 a5 ~!128 g5 ~!126 a5 ~!64"
     # amp "0!230 0.27 0!130 0.39 0!34 0.35 0!60 0.33 0!28 0.49 0!70 0.33 0!33 0.39 0!49 0.55 0!61 0.33 0!128 0.18 0!126 0.24 0!64"
     # legato "0!230 26.0 0!130 1.0 0!34 21.0 0!60 3.0 0!28 19.0 0!70 13.0 0!33 26.0 0!49 4.0 0!61 33.0 0!128 15.0 0!126 28.0 0!64",
     n "~!570 e6 ~!453"
     # amp "0!570 0.4 0!453"
     # legato "0!570 11.0 0!453"
     ]
  

d1 $ cat [piano1, piano1] # m 1

setbpm 130 

d1 $ sliceDiv4 0 8 16 7 "0.3" $ piano1 # m "[1 2 3 2 1 3 2 1]/2" 

d2 $ (|- n 5) $ (|- n 12) $ (|+ nT "bup" 5 "0 0 12") $ r 0.002 $ 
    rizz 8 "0 0.01" $ 
    (|* amp "[0.9 0.8]") $
    gas 4 "0.5 0.6 0.3 0.2 " $ (|* legato (fast 4 "1 0.5 1 0.5")) $
    (# legato "[2 2 1 0.6 2 2.2 0.8 0.7]/4") $
    struct "<[t(7,8) t(5,8,2)] t(13,15) t(9, 16)>" $ n "[<-2 5> 4 2 <0 5>]/8" # m 5

d1 $  sliceDiv4 3 7 8 7 "0.3" $
    piano1 # m (l 0.25 $ "[1 2 3 2 1 3 2 1]/2") 

d3 $ every 7 (fast 2) $ sliceDiv4 4 6 8 5 "0.3" $
    piano1 # m (r 0.25 $ "[1 2 3 2 1 3 2 1]/2") 

d3 $ sliceDiv4 4 6 8 5 "0.3" $ piano1 # m (r 0.25 $ "[1 2 3 2 1 3 2 1]/2") 

d4 $ piano1 # m (l 0.5 $ "4") 

d5 $ drumz $ n "0 0 0 0" # m 6

d6 $ drumz $
    every 7 ((|- amp 0.1) . fast 1.5) $ 
    mask "t [t <t t t f>]" $
    (gas 4 "0.3 <0.4 0.35> <0.2 0.15 0.18> 0.4") $
    rizz 8 "0 0.01" $ 
    n "5 5 6 ~ 5 5 6 ~  5 5 5 6  5 6 5 6" # m 6

d7 silence

d7 $ drumz $ 
    rizz 8 "0 0.01" $ 
    (|+ amp (fast "[2 1 2 0.25]/8" $ range (-0.1) 0.1 $ sine))$
    gas 4 "0.4 0.3 0.1 0.2" $
    mask "<t!7 f>" $
    mask "[f t] t " $ every 7 ((|- amp 0.4) . fast 3) $ every 3 ((|- amp 0.2) . fast 2) $ (# amp 0.5) $ struct "t(7,16)" $
    nT "perc" 5 "1 4 3 2" # m 6

d5 $ drumz $ n "0 [0,3] [0@3 3] <0!3 [0 0] 0!3 ~>" # m 7

d9 $ r "0.0023" $ rizz 8 "0 0.01" $ 
     (|+ n "[0 12]/3") $
     fast "<2 1> 2 <1 2 4> 2" $ n (tScale "4 9 14" ("0 2 [3 4 ] [5 1]" |+ "[1 2 3 2]/4" )) # m 8

d9 $ r "0.0023" $ rizz 8 "0 0.01" $ 
     (|+ n "[0 12]/3") $
     fast "<2 3> 2 <1 2 4> 2" $ n (tScale "4 9 14" ("4 2 [3 0 ] [1 5]" |+ "[1 2 3 2]/4" )) # m 8

d9 $ r "0.0023" $ rizz 8 "0 0.01" $ 
     (|+ n "[0 12 0 24]*4") $
      fast "1 2 1 2" $ n (tScale "4 9 12 19" ("4 2 [3 0 ] [1 5]" |+ "[1 2 3 2]/4" )) # m 8
