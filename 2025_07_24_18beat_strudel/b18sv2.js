setCpm(103/2*16/18/2)

let mb1 = 'IAC Driver Bus 1'

let suinge = "[0 0 -0.01 -0.02 -0.025 -0.035]*3",
    dp = 0.035

$adrumz : note("2 2 3 0 4 2 4 3 3 1 0 0 3 2 0 0 4 1 2 2 4 1 2 4 3 3 2 2 4 1 4 0 0 2 3 4 2 4 4 4 1 0 0 3 1 0 3 1 0 0 3 3 0 0 3 4 0 0 1 4 4 3 4 2 2 4 1 4 0 4 2 1 1 1 4 0 4 2 1 3 4 4 4 3 1 2 0 3 2 0 2 4 4 2 1 2 0 0 4 4 1 1 1 3 0 0 4 3 3 4 2 2 4 0 3 4 1 2 2 4 3 1 1 1 4 4 3 1 4 1 1 3 3 0 1 1 3 3 2 4 4 1 2 0")
  .gain("0.65 0.38 0.38 0.662 0.67 0.7 0.662 0.72 0.32 0.2 0.38 0.32 0.18 0.2 0.18 0.38 0.3 0.2 0.25 0.67 0.38 0.2 0.32 0.25 0.18 0.2 0.67 0.32 0.3 0.3 0.38 0.38 0.18 0.32 0.18 0.25 0.38 0.32 0.2 0.25 0.3 0.2 0.3 0.25 0.25 0.32 0.38 0.3 0.25 0.38 0.32 0.2 0.18 0.18 0.18 0.25 0.38 0.38 0.67 0.662 0.67 0.662 0.67 0.25 0.38 0.65 0.38 0.3 0.7 0.25 0.25 0.18 0.3 0.3 0.2 0.3 0.18 0.3 0.25 0.3 0.25 0.25 0.32 0.18 0.2 0.3 0.3 0.25 0.25 0.25 0.2 0.38 0.3 0.18 0.32 0.18 0.2 0.2 0.18 0.25 0.3 0.32 0.662 0.7 0.32 0.25 0.18 0.32 0.25 0.32 0.65 0.18 0.25 0.65 0.32 0.2 0.38 0.2 0.18 0.32 0.3 0.72 0.2 0.25 0.65 0.32 0.18 0.18 0.32 0.3 0.3 0.25 0.38 0.2 0.2 0.32 0.3 0.65 0.25 0.3 0.65 0.38 0.32 0.72"
       .mul("[1.2 0.8 0.7 0.6  0.7 1.1]*3*8"))
.slow(8).late(0.035).late(suinge).transpose(36).midi(mb1).midichan(1)._punchcard()


$l1 : note("14").struct(("1(13,18,2)"))
  .gain("[1.2 0.8 0.7 0.6  0.7 1.1]*3*8".mul(0.9))
  .late(0.0365).late(suinge).transpose(60).midi(mb1).midichan(2)

$l2 : note("2 12").gain("[1.2 0.8 0.7 0.6  0.7 1.1]*3*8".mul(0.8)).struct("1(<13 15>,18)")
  .late(0.037).late(suinge).transpose(60).midi(mb1).midichan(3)

$sn: note("<~ [ ~ ~ [3(< 17 9 >,18)]@16]>").late(0.037).late(suinge).transpose(36).midi(mb1).midichan(4)

$keys: note("[0 5 18  28]*18").struct("1(<13 15>,18)")
     .transpose("2 2 3 0 4 2 4 3 3 1 0 0 3 2 0 0 4 1 2 2 4 1 2 4 3 3 2 2 4 1 4 0 0 2 3 4 2 4 4 4 1 0 0 3 1 0 3 1 0 0 3 3 0 0 3 4 0 0 1 4 4 3 4 2 2 4 1 4 0 4 2 1 1 1 4 0 4 2 1 3 4 4 4 3 1 2 0 3 2 0 2 4 4 2 1 2 0 0 4 4 1 1 1 3 0 0 4 3 3 4 2 2 4 0 3 4 1 2 2 4 3 1 1 1 4 4 3 1 4 1 1 3 3 0 1 1 3 3 2 4 4 1 2 0".slow(8))
    .gain("[1.2 0.8 0.7 0.6  0.7 1.1]*3*8".mul(0.9))
  .legato(perlin.range(1,2).ribbon(23,9)).late(0.037).late(suinge).transpose(0).transpose(31).transpose(60).midi(mb1).midichan(5)

$chords1: note("< ~ [~ [0,5,18,29]@16  ]>").transpose(60).transpose(6).transpose(13).midi(mb1).midichan(7)

//$chords1: note("[0,18,23, 26]").transpose(60).transpose(6).transpose(13).midi(mb1).midichan(7)

$chords: note("[0 5 18 29]*6").mask("<1(15,18,1) 0>").transpose(60).transpose(-62)
      .transpose("0 31 [62 52] 31").transpose(6).transpose(13).midi(mb1).midichan("<6 6 8 8>")._punchcard()
