:script "~/Music/ableton_songs/toolz.tidal"


let e31 p  = tScale' 31 "0 5 10 13 18 23 28" p

let e34 p  = tScale' 34 "0 6 11 14 20 25 31" p

let e34p p  = tScale' 34 "0 6 11  20 25 " p

d1 $ (|- n 9) $ gr $ struct "t@5 t@6 t@7 t@8 t@4 t@6 t@8 t@3 t@7 t@3 t@4 t@5 t@6" $
       fast 4  $ n  (e34 ((segfunc "<14 18 16 13>/4" $ fast 2 $ range (-2) 4 $ egg 1 4) |- "<0 4 -2 2>")) # m "1 2" 


d1  silence

d2 silence

-- old lead, skip 
d2 $  struct (r (1/18) "t@5 t@6 t@7 t@8 t@4 t@6 t@8 t@3 t@7 t@3 t@4 t@5 t@6") $
       fast 4  $ n  (e34 ((segfunc "<14 18 16 13>/4" $ fast 2 $ range (-2) 4 $ egg 1 4) |- "<0 4 -2 2>"  |- 2 |- "<0 4 3 1>*2")) # m 2

let gr p = fast 18 $ (whenmod 2 1) (r (range 0 0.025 $ fast 3 $ sine)) $ (whenmod 2 0) (r (range 0 0.01 $ sine)) $ slow 18 $ p
    e34p p  = tScale' 34 "0 6 11  20 25 " p

-- nice sine lead
d1 $ (|- n 14) $ gr $ struct "t@5 t@6 t@7 t@8 t@4 t@6 t@8 t@3 t@7 t@3 t@4 t@5 t@6" $
       fast 3  $ n  (e34p "{0 .. 4}%9" ) # m "1 [1 2]" 

-- ice plucks
d3 $ gr $ (|* amp (range 1.3 1.0 $ egg 1 4)) $ (# amp 0.5) $ struct "t@5 t@6 t@7 t@8 t@4 t@6 t@8 t@3 t@7 t@3 t@4 t@5 t@6" $ drumz $ nT "bongo" 8 "0..7" # m 3


-- snare
d4 $ drumz $ r 0.001 $ gr $ fast 2 $ n "~ <0 1 2 3 4>" # m 6

-- wonky kick
d5 $ gr $ mask (fast 2 $ "t [f t!17 ]") $ drumz $  (|* amp (range 1.3 1.0 $ egg 1 4)) $ struct "t(11, 18,1)" $ (# amp "0.5!8 0.2 0.5!2") $ n "4 0 1 1  2 0 3 1  ~ 2 1" # m 4



d1 

d3 silence

d3 $  struct "t@5 t@6 t@7 t@8 t@4 t@6 t@8 t@3 t@7 t@3 t@4 t@5 t@6" $

t@8 t@4 t@6
t@8 t@3 t@7
t@3 t@4 t@5 t@6" # m 1
