setcps(120/120/2)

let md = mute 1
    shd = mute 1

md

let umd = unmute 1

umd


let imma = slow (8/4) $ stack [
     n "e0 ~ as0 ~ gs0 ~!3 gs0 ~!3 f0 gs0 as0 ~ g0 ~ gs0 ~ gs0 ~ as0 ~ fs0 ~ b0 ~ gs0 ~ as0 ~ gs0 ~ as0 ~ gs0 ~ as0 ~ gs0 ~!3 gs0 ~!3 g0 ~ as0 ~ gs0 ~!3 gs0 ~ gs0!2 a0 ~ as0 g9"
     # amp "1.0 0.0 0.01 0.0 0.46 0!3 0.75 0!3 1.0 0.72 0.01 0.0 1.0 0.0 0.89 0.0 0.77 0.0 0.01 0.0 1.0 0.0 0.58 0.0 0.29 0.0 0.06 0.0 1.0 0.0 0.06 0.0 0.46 0.0 0.14 0.0 0.75 0!3 0.9 0!3 1.0 0.0 0.14 0.0 0.77 0!3 0.82 0.0 0.26 0.19 0.75 0.0 0.14 0.03"
     # legato "0!63 1.0",
     n "gs0 ~!3 b0 ~!7 gs0 ~!11 gs0 ~!11 b0 ~!27"
     # amp "1.0 0!3 0.38 0!7 0.9 0!11 0.82 0!11 0.38 0!27"
     # legato "0!64"
     ] # m 16 

-- C Major
d1 $ imma

-- hexatonic triads
d2 $ void ("[0, 2, 4, 6] " +| "[0 1]/2") ["0 2 4  7 9 11"] # m 6 # amp 0.1



-- E dorian
d1 $ (|+ n 8) $ imma
--  b minor 7 f# minor 7

d2 $ (|+ n "[-1 -6]/2") $ n "[0, 3, 7, 10]" # m 6 



let surface = slow (8/4) $ stack [
     n "c3 ~!7 g3 ~!7 e3 ~!7 c3 ~!7 d3 ~!3 e3 ~!3 c3 ~!7 e3 ~!7 c3 ~!3 e3 ~!3 e3 ~!7 e3 ~!7 c3 ~!7 g3 ~!7 d3 ~!7 c3 ~!7 g3 ~!6 fs3 ~!8 e3 ~!3 e3 ~!3 cs3 ~!7 e3 ~!7 c3 ~!7 d3 ~!7 c3 ~!7 g3 ~!7 c3 ~!3 e3 ~!3 e3 ~!7 e3 ~!7 c3 ~!7 e3 ~!7 d3 ~!7 e3 ~!3 e3 ~!3 e3 ~!3 e3 ~!3 e3 ~!3 ~ ~!3"
     # amp "0.84 0!7 0.76 0!7 0.24 0!7 0.84 0!7 0.84 0!3 0.1 0!3 0.84 0!7 0.31 0!7 0.84 0!3 0.63 0!3 0.39 0!7 0.8 0!7 0.84 0!7 0.65 0!7 0.84 0!7 0.84 0!7 0.28 0!6 0.68 0!8 0.46 0!3 0.35 0!3 0.74 0!7 0.24 0!7 0.84 0!7 0.84 0!7 0.84 0!7 0.34 0!7 0.84 0!3 0.64 0!3 0.4 0!7 0.8 0!7 0.84 0!7 0.63 0!7 0.84 0!7 0.59 0!3 0.5 0!3 0.21 0!3 0.12 0!3 0.76 0!3 0.09 0!3"
     # legato "2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!3 2.0 0!3 2.0 0!7 2.0 0!7 2.0 0!3 2.0 0!3 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!6 3.0 0!8 2.0 0!3 2.0 0!3 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!3 2.0 0!3 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!3 2.0 0!3 2.0 0!3 2.0 0!3 2.0 0!3 4.0 0!3",
     n "~!24 e3 ~!7 e3 ~!7 e3 ~!7 g3 ~!7 e3 ~!23 e3 ~!15 e3 ~!7 e3 ~!31 e3 ~!15 e3 ~!7 e3 ~!7 e3 ~!15 e3 ~!7 g3 ~!7 g3 ~!7 e3 ~!15 e3 ~!23 g3 ~!7"
     # amp "0!24 0.69 0!7 0.2 0!7 0.63 0!7 0.33 0!7 0.73 0!23 0.24 0!15 0.26 0!7 0.63 0!31 0.73 0!15 0.69 0!7 0.2 0!7 0.63 0!15 0.74 0!7 0.42 0!7 0.82 0!7 0.24 0!15 0.22 0!23 0.82 0!7"
     # legato "0!24 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!23 2.0 0!15 2.0 0!7 2.0 0!31 2.0 0!15 2.0 0!7 2.0 0!7 2.0 0!15 2.0 0!7 2.0 0!7 2.0 0!7 2.0 0!15 2.0 0!23 2.0 0!7"
     ] # m 15

d2 silence

-- A dorian / D dorian
d1 $ surface

-- A dorian
d1 $ (|+ n "56") $ surface

-- A dorian / D dorian
d1 $ surface

-- both!
d1 $ (|+ n "[8, 56]") $ surface


let cuica = slow (8/4) $ stack [
     n "c7 ~!3 g7 ~!2 e7 ~!4 d7 ~!3 c7 ~!3 ds7 ~!2 e7 ~!4 ds7 ~!3 c7 ~!3 d7 ~!2 e7 ~!4 ds7 ~!3 c7 ~!3 ds7 ~!3 g7 ~!2 e7 ~!4 c7 ~!3 g7 ~!2 e7 ~!4 d7 ~!3 c7 ~!2 e7 ~!4 d7 ~!2 e7 ~!4 c7 ~!3 d7 ~!3 f7 ~!3 g7 ~!3 c7 ~!3 g7 ~!2 e7 ~!4 g7 ~ ~ ~"
     # amp "1.0 0!3 0.35 0!2 0.69 0!4 0.99 0!3 1.0 0!3 0.83 0!2 0.69 0!4 0.83 0!3 1.0 0!3 0.99 0!2 0.94 0!4 0.83 0!3 1.0 0!3 0.83 0!3 0.49 0!2 0.83 0!4 1.0 0!3 0.01 0!2 0.97 0!4 0.99 0!3 1.0 0!2 0.83 0!4 0.99 0!2 0.83 0!4 1.0 0!3 0.99 0!3 0.97 0!3 0.83 0!3 1.0 0!3 0.01 0!2 0.94 0!4 0.21 0.0 0.94 0.0"
     # legato "1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0!2 2.0 0!4 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!2 2.0 0!4 1.0 0.0 2.0 0.0",
     n "ds7 ~!7 g7 ~!3 g7 ~!3 cs7 ~!3 g7 ~!3 d7 ~!3 g7 ~!3 ds7 ~!3 g7 ~!3 ds7 ~!3 g7 ~!3 cs7 ~!3 g7 ~!7 g7 ~!3 g7 ~!7 g7 ~!3 g7 ~!3 cs7 ~!3 g7 ~!3 g7 ~!3 g7 ~!3 g7 ~!3 g7 ~!3 fs7 ~!7 cs7 ~!7 g7 ~!7"
     # amp "1.0 0!7 0.49 0!3 0.35 0!3 1.0 0!3 0.35 0!3 0.99 0!3 0.35 0!3 1.0 0!3 0.35 0!3 0.97 0!3 0.35 0!3 1.0 0!3 0.35 0!7 0.35 0!3 0.4 0!7 0.03 0!3 0.01 0!3 1.0 0!3 0.01 0!3 0.03 0!3 0.01 0!3 0.4 0!3 0.01 0!3 0.97 0!7 1.0 0!7 0.24 0!7"
     # legato "1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!7 1.0 0!7",
     n "g7 ~!15 ds7 ~!7 g7 ~!7 g7 ~!7 g7 ~!7 d7 ~!31 g7 ~!23 g7 ~!7 d7 ~!15"
     # amp "0.87 0!15 1.0 0!7 0.49 0!7 0.87 0!7 0.49 0!7 0.99 0!31 0.4 0!23 0.03 0!7 0.99 0!15"
     # legato "1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!31 1.0 0!23 1.0 0!7 1.0 0!15",
     n "~!16 g7 ~!31 g7 ~!63 g7 ~!15"
     # amp "0!16 0.87 0!31 0.87 0!63 0.35 0!15"
     # legato "0!16 1.0 0!31 1.0 0!63 1.0 0!15"
     ] # m 16

-- D dorian
d1 $ cuica

-- E half-whole octatonic 
d1 $ (|+ n 8) $ cuica

-- D dorian
d1 $ cuica

-- E half-whole octatonic 
d1 $ (|+ n 16) $ cuica

--  G minor pentatonic
d1 $ (|+ n 24) $ cuica

let hous = slow (8/4) $ stack [
     n "c9 ~!3 e9 ~!3 fs9 ~!3 cs9 ~!3 c9 ~!7 d9 ~!3 d9 ~!3 c9 ~!3 cs9 ~!3 fs9 ~!3 cs9 ~!3 c9 ~!3 e9 ~!3 c9 ~!3 c9 ~!3 c9 ~!3 e9 ~!3 fs9 ~!3 cs9 ~!3 c9 ~!3 d9 ~!3 d9 ~!3 d9 ~!3 c9 ~!3 cs9 ~!3 fs9 ~!3 cs9 ~!3 c9 ~!7 c9 ~!3 c9 ~ ~ ~"
     # amp "1.0 0!3 1.0 0!3 0.99 0!3 0.77 0!3 1.0 0!7 0.01 0!3 0.05 0!3 1.0 0!3 0.2 0!3 0.99 0!3 1.0 0!3 1.0 0!3 0.14 0!3 0.23 0!3 0.47 0!3 1.0 0!3 1.0 0!3 0.99 0!3 0.99 0!3 1.0 0!3 0.33 0!3 0.01 0!3 0.16 0!3 1.0 0!3 0.15 0!3 0.99 0!3 1.0 0!3 1.0 0!7 0.23 0!3 0.47 0.0 0.94 0.0"
     # legato "1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0.0 2.0 0.0",
     n "~!16 ds9 ~!7 fs9 ~!7 e9 ~!11 g9 ~!3 ds9 ~!7 d9 ~!3 d9 ~!3 f9 ~!15 ds9 ~!7 fs9 ~!7 e9 ~!11 e9 ~!3 ds9 ~!7 d9 ~!3 d9 ~!3"
     # amp "0!16 1.0 0!7 0.85 0!7 0.83 0!11 1.0 0!3 1.0 0!7 0.02 0!3 0.01 0!3 0.51 0!15 1.0 0!7 0.85 0!7 0.83 0!11 0.16 0!3 1.0 0!7 0.26 0!3 0.21 0!3"
     # legato "0!16 1.0 0!7 1.0 0!7 1.0 0!11 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!11 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!3",
     n "~!32 f9 ~!15 e9 ~!7 f9 ~!39 f9 ~!11 g9 ~!3 e9 ~!7 f9 ~!7"
     # amp "0!32 0.57 0!15 0.17 0!7 0.69 0!39 0.57 0!11 1.0 0!3 0.17 0!7 0.69 0!7"
     # legato "0!32 1.0 0!15 1.0 0!7 1.0 0!39 1.0 0!11 1.0 0!3 1.0 0!7 1.0 0!7",
     n "~!56 fs9 ~!63 fs9 ~!7"
     # amp "0!56 0.99 0!63 0.99 0!7"
     # legato "0!56 1.0 0!63 1.0 0!7"
     ] # m 15


-- G dorian
d1 $ (|+ n 8) $ hous

-- tritone sub
-- C# dorian
d1 $ hous

-- G dorian
d1 $ (|+ n "8 8 8 -32") $ hous

let snack = slow (8/4) $ stack [
     n "e4 ~!7 b4 ~!7 e4 ~!3 a4 ~!3 fs4 ~!7 e4 ~!7 fs4 ~!3 a4 ~!3 e4 ~!7 fs4 ~!3 fs4 ~!3 e4 ~!7 f4 ~!7 e4 ~!7 fs4 ~!7 e4 ~!7 fs4 ~!3 a4 ~!3 e4 ~!7 e4 ~!3 e4 ~!2 ~"
     # amp "1.0 0!7 0.47 0!7 1.0 0!3 0.88 0!3 0.32 0!7 1.0 0!7 0.1 0!3 0.88 0!3 1.0 0!7 0.01 0!3 0.04 0!3 1.0 0!7 0.37 0!7 1.0 0!7 0.32 0!7 1.0 0!7 0.1 0!3 0.87 0!3 1.0 0!7 0.22 0!3 0.2 0!2 0.94"
     # legato "1.0 0!7 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!3 1.0 0!2 1.0",
     n "as4 ~!7 gs4 ~!7 g4 ~!7 gs4 ~!15 gs4 ~!7 g4 ~!7 gs4 ~!15 a4 ~!7 g4 ~!7 gs4 ~!15 gs4 ~!7 g4 ~!7 fs4 ~!7"
     # amp "0.69 0!7 0.72 0!7 1.0 0!7 0.94 0!15 0.94 0!7 1.0 0!7 0.94 0!15 0.94 0!7 1.0 0!7 0.94 0!15 0.94 0!7 1.0 0!7 0.01 0!7"
     # legato "1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!7",
     n "~!120 gs4 ~!7"
     # amp "0!120 0.94 0!7"
     # legato "0!120 1.0 0!7"
     ] # m 16


-- E phrygian / D dorian
d1 $ (|+ n 24 ) $ snack

-- D dorian
-- chickens
d1 $ (|+ n 8 ) $ snack

-- C# phryigian B dorian
d1 $ (|+ n 16 ) $ snack

-- E phrygian / D dorian
d1 $ (|+ n 24 ) $ snack

-- C dorian
d1 $ snack

let ovuca = slow (16/4) $ stack [
     n "e0 ~ gs0 f0 e0 gs0 g0 ~ e0 gs0!2 f0 e0 gs0!3 e0 ~ gs0 f0 e0 gs0 g0 ~ e0 gs0!2 f0 e0 gs0!3 e0 ~ gs0 f0 e0 gs0 g0 ~ e0 gs0!2 f0 e0 gs0!3 e0 gs0!2 f0 e0 gs0 g0 f0 e0 gs0!2 f0 e0 gs0 fs0 gs0"
     # amp "1.0 0.0 1.0 0.62 1.0 0.01 0.65 0.0 1.0 0.01 1.0 0.8 1.0 0.01 1.0 0.01 1.0 0.0 1.0 0.62 1.0 0.01 0.65 0.0 1.0 0.01 1.0 0.8 1.0 0.01 1.0 0.01 1.0 0.0 1.0 0.62 1.0 0.01 0.65 0.0 1.0 0.01 1.0 0.8 1.0 0.01 1.0 0.01 1.0 0.4 0.57 0.62 1.0 0.01 0.65 0.78 1.0 0.01 1.0 0.8 1.0 0.01 0.74 0.12"
     # legato "0!63 1.0",
     n "as0 ~!3 gs0 ~ gs0 ~!5 g0 ~!3 as0 ~!3 gs0 ~ gs0 ~!5 g0 ~!3 as0 ~!3 gs0 ~ gs0 ~!5 g0 ~!3 b0 ~!2 gs0!2 ~ a0 ~!3 a0 ~ g0 ~ gs0 ~"
     # amp "0.36 0!3 0.18 0.0 0.84 0!5 0.6 0!3 0.36 0!3 0.18 0.0 0.84 0!5 0.6 0!3 0.36 0!3 0.18 0.0 0.84 0!5 0.6 0!3 0.36 0!2 0.01 0.06 0.0 0.62 0!3 0.69 0.0 0.6 0.0 1.0 0.0"
     # legato "0!64",
     n "~!12 gs0 ~!15 gs0 ~!15 gs0 ~!15 gs0 ~ a0 ~"
     # amp "0!12 0.01 0!15 0.01 0!15 0.01 0!15 0.01 0.0 0.69 0.0"
     # legato "0!64"
     ] # m 15


-- C minor
d1 $ ovuca

d1 $ (|+ n 8) $ ovuca

-- F dorian
d1 $ (|+ n 16) $ ovuca

-- G minor
d1 $ (|+ n 24) $ ovuca

-- C minor
d1 $ ovuca


let halftime = slow (8/4) $ stack [
     n "gs5 a5 ~ a5!2 d6 a5!2 as5 a5 ~ a5!2 c6 a5!2 gs5 a5 ~ a5 gs5 c6 a5 gs5 as5 a5 ~ a5!2 d6 a5 e0"
     # amp "1.0 0.64 0.0 0.53 0.18 0.17 0.72 0.5 1.0 0.64 0.0 0.45 0.26 0.45 0.64 0.58 1.0 0.64 0.0 0.53 1.0 0.55 0.72 0.91 1.0 0.64 0.0 0.45 0.26 0.01 0.64 0.06"
     # legato "0.0 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!5 1.0",
     n "c6 d6 ~ c6!2 ~ d6 c6 b5 c6 ~ d6!2 ~ as5 d6 c6!2 ~ d6 c6 ~ c6 d6 b5 c6 ~ d6 c6 ~ as5 d6"
     # amp "0.85 0.4 0.0 0.67!2 0.0 0.27 0.65 1.0 0.66 0.0 0.2 0.52 0.0 0.43 0.13 0.92 0.76 0.0 0.08 0.79 0.0 0.72 0.06 1.0 0.74 0.0 0.2 1.0 0.0 0.43 0.13"
     # legato "0.0 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!6",
     n "~!9 ds6 ~!4 d6 ~!9 d6 ~!5 b5 ~"
     # amp "0!9 0.4 0!4 0.44 0!9 0.28 0!5 0.26 0.0"
     # legato "0!9 1.0 0!22",
     n "~!30 cs6 ~"
     # amp "0!30 0.74 0.0"
     # legato "0!32",
     n "~!30 d6 ~"
     # amp "0!30 0.44 0.0"
     # legato "0!32"
     ] # m 15

-- F dorian
d1 $ halftime 

-- G dorian
d1 $ (|+ n 8) halftime 

-- F# dorian
d1 $ (|+ n 16) halftime 


-- C dorian samba
d1 $ (|- n 32) halftime 

-- F dorian
d1 $ halftime 


let nasty = slow (8/4) $ stack [
     n "gs1 ~!7 c2 ~!3 c2 ~!3 as1 ~!7 gs1 ~!7 c2 ~!7 c2 ~!7 gs1 ~!3 c2 ~!3 c2 ~!7 gs1 ~!7 c2 ~!7 as1 ~!7 cs2 ~!7 c2 ~!7 c2 ~!7 as1 ~!3 c2 ~!3 c2 ~ c2 ~ c2 ~ c2 ~"
     # amp "1.0 0!7 0.35 0!3 0.31 0!3 1.0 0!7 1.0 0!7 1.0 0!7 0.54 0!7 1.0 0!3 0.01 0!3 0.54 0!7 1.0 0!7 0.5 0!7 1.0 0!7 0.54 0!7 0.89 0!7 0.49 0!7 1.0 0!3 0.01 0!3 0.71 0.0 0.55 0.0 0.01 0.0 0.01 0.0"
     # legato "1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!3 1.0 0!3 1.0 0.0 1.0 0.0 1.0 0.0 1.0 0.0",
     n "a1 ~!15 d2 ~!7 c2 ~!15 d2 ~!7 as1 ~!7 d2 ~!7 a1 ~!15 c2 ~!23 ds2 ~!7 c2 ~!7 d2 ~!5 fs1 ~"
     # amp "1.0 0!15 0.69 0!7 0.54 0!15 0.69 0!7 1.0 0!7 0.69 0!7 1.0 0!15 0.86 0!23 0.76 0!7 0.97 0!7 0.76 0!5 0.03 0.0"
     # legato "1.0 0!15 1.0 0!7 1.0 0!15 1.0 0!7 1.0 0!7 1.0 0!7 1.0 0!15 1.0 0!23 1.0 0!7 1.0 0!7 1.0 0!5 2.0 0.0",
     n "c2 ~!39 ds2 ~!7 c2 ~!15 c2 ~!15 ds2 ~!47"
     # amp "0.86 0!39 0.99 0!7 0.8 0!15 0.86 0!15 0.76 0!47"
     # legato "1.0 0!39 1.0 0!7 1.0 0!15 1.0 0!15 1.0 0!47"
     ] # m 16

d1 $ (|+ n 8) nasty

-- D locrian / F dorian 
d1 $ (|+ n 24) nasty

-- C# phryg / B dorian   
-- tritone sub D Ab
-- woof
d1 $ nasty

-- down a half step
-- Bb dorian C phrygian
d1 $ (|+ n 16) nasty

d1 $ (|+ n 24) nasty

d1 $ fix (# amp 0) ("[cs2, c2]")  $ nasty
